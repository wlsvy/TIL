# C

## 25.01.09

- 게임물관리위원회 ( 줄여서 게등위 ) 에서는 등급 심사를 위해 인 게임 텍스트 추출 요청을 하기도 한다.
- 이 경우 게임 데이터에서 텍스트 추출 도구가 준비되어야 함.

## 25.01.20

[넥슨 '마비노기', NPC 상점 설정 오류 발생…디렉터 사과](https://www.msn.com/ko-kr/news/other/%EB%84%A5%EC%8A%A8-%EB%A7%88%EB%B9%84%EB%85%B8%EA%B8%B0-npc-%EC%83%81%EC%A0%90-%EC%84%A4%EC%A0%95-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D-%EB%94%94%EB%A0%89%ED%84%B0-%EC%82%AC%EA%B3%BC/ar-AA1xucKS?ocid=BingNewsSerp)

    관련 내용은 지난 16일 업데이트로 추가된 고가 아이템 2종인 ‘마력이 깃든 융합제’와 ‘무리아스의 성수 효과 제거 주문서’가 추가되면서 발생한 것으로 조사됐다.

    민 디렉터는 “해당 내용은 NPC 상점에서 구매할 수 있는 아이템 중 높은 가격 혹은 높은 묶음 개수를 가지고 있는 아이템에서 발생했다”며 “구매 가격과 개수로 계산되는 중간값이 42억을 넘어가는 경우, 코드에서 결과 값을 도출하면서 오버플로우가 발생해 부끄럽게도 이번과 같은 문제가 발생하게 됐다”고 설명했다.

    마비노기 측은 디렉터의 공지 전 오류와 관련해 긴급 점검 및 조치 안내를 통해 부당한 이득을 취한 캐릭터에 26명의 게임이용제한을 발표했다. 그러나 마비노기 커뮤니티에서는 이번 오류가 발생하기 전부터 이를 악용한 이용자가 있다는 제보와 함께 적극적인 대응을 요구하기도 했다.

- int32 형 오버플로우가 유발한 돈 복사 버그.

---

[Please Don't Force Dark Mode — Vishnu's Pages](https://iamvishnu.com/posts/please-dont-force-dark-mode)

**My Eyes! My Eyes! 😵💫**

    Reading in dark mode doesn’t just mess with my eyes while I’m at it — it sticks around afterward too. 
    Every time I finish a long article, I end up seeing horizontal stripes everywhere I look, like my eyes just won’t let it go.

**What’s the real problem with the dark mode?**

    The real problem is the contrast ratio between the text and the background when using dark mode.

    For example, pure white text on a pitch black background can strain my eyes and be very difficult to read. The contrast ratio of this combination is 21:1

    However, light gray text on a dark gray background is easy on my eyes.
    Here the background is #666 and the text is #E0E0E0 which creates a contrast ratio of 4.34:1.

**higher contrast ratios in dark mode cause discomfort for my eyes. But when I say ‘higher’, just how high can it go?**

    The Web Content Accessibility Guidelines (WCAG) version 2.1 recommends a minimum contrast ratio of 4.5:1 for normal texts (SC 1.4.3) but not a maximum.
    The current guidelines makes pure white text on pitch black background completely accessible, even if the contrast ratio is an unbearable 21:1. 
    But the more comfortable contrast ratio of 4.34:1 from the above example fails according to the guidelines.

> That means, currently, there are no standards or guidelines that address contrast ratios in dark mode.

---

[Project Lombok](https://projectlombok.org/#)

- java 의 롬복
- [Introduction to Project Lombok  Baeldung](https://www.baeldung.com/intro-to-project-lombok)

java 코드 작성 시의 자주 반복되는 코드 boilerplate 지점들을 자동 작성해주는 도구

- getter, setter, constructor, toString, Equal 등등,
- c# 의 record 개념이 가지는 컴파일러 매직과 비슷하다는 느낌을 받음.

---

[On Long Term Software Development - Bert Hubert's writings](https://berthub.eu/articles/posts/on-long-term-software-development/)

- [장기적(long term) 소프트웨어 개발  GeekNews](https://news.hada.io/topic?id=18407)

테스트, 테스트, 그리고 테스트

    테스트의 필요성은 모두가 동의하는 기본 원칙:
        가능한 많은 테스트를 작성.
        모든 테스트가 동등하게 가치 있는 것은 아니지만, 테스트 자체를 후회할 일은 거의 없음.
    특히 의존성이 많은 프로젝트에서 테스트는 필수:
        의존성이 변경되거나 드리프트될 경우, 문제를 조기에 감지하는 데 도움.
    테스트의 역할
        문제 해결 지원:
            변경 상황에 맞춰 빠르게 조정 가능.
        리팩토링 지원:
            코드 의존성을 제거하거나 변경할 때 자신감을 제공.
        장기 유지보수에 유용:
            개발이 3년 이상 중단된 이후에도 테스트를 통해 시스템이 여전히 작동하는지 확인.
            새 컴파일러, 런타임, 운영체제에서도 기능 유지 여부를 확인.
    테스트는 비용이 아니라 투자
        더 많은 테스트를 작성:
            테스트는 유지보수와 안정성의 기반.
            코드 수정 또는 확장 시 테스트는 큰 정신적 지지 역할.

복잡성: 소프트웨어 개발의 최종 보스

    복잡성은 소프트웨어 개발의 궁극적 적:
        최고의 개발자나 팀도 복잡성에 의해 무너질 수 있음.
        엔트로피와 인간 행동의 영향으로 복잡성은 항상 증가.
        복잡성을 의식적으로 관리하지 않으면, 프로젝트는 유지 불가능한 상태로 빠질 수 있음.
    복잡성과 코드 양의 상관관계
        코드 양과 복잡성:
            코드가 적을 때는 다소 복잡하더라도 관리 가능.
            코드가 늘어날수록 단순성을 유지해야 제어 가능.
            관리 가능한 복잡성은 팀의 역량과 "초록 삼각형" 안에 있어야 함.
        복잡성의 한계:
            팀 인원을 늘리거나 뛰어난 역량의 개발자를 고용하더라도 복잡성 처리에는 한계가 있음.
            한계를 넘어서면 프로젝트는 유지보수 불가능한 상태에 빠짐.
    코드가 항상 ‘오른쪽 위’로 움직이는 이유:(그래프에서)
        더 많은 기능 요청.
        불필요한 최적화 시도.
        버그 수정 시 기존 복잡성을 줄이는 대신 새로운 코드 추가.
    잘못된 API 설계의 비용:
        예: CreateFile 함수가 대부분의 경우 파일을 생성하지 않음.
        이러한 혼란은 추가적인 인지적 부담과 실수 가능성을 높임.
    복잡성 관리 전략
        리팩토링은 조기에, 그리고 자주:
            불필요한 코드를 제거하고, 단순화에 시간 투자.
        테스트에 투자:
            테스트가 많을수록 복잡성을 줄이는 작업이 쉬워짐.
        복잡성 관리의 중요성:
            단순화를 위해 미리 노력하지 않으면, 장기 프로젝트는 결국 "유지보수 불가 상태"로 빠질 위험이 있음.

지루하고 간단한 코드를 작성하라. 그보다 더 간단하게. 그리고 더 지루하게.

    "디버깅은 프로그램을 작성하는 것보다 두 배 더 어렵다. 따라서 코드를 작성할 때 최대한 똑똑하게 만들면, 그것을 디버깅할 방법은 무엇인가?" - Brian Kernighan

    슈퍼 지루하고 명확한 코드 작성:
        나이브(näive)하지만 직관적으로 이해 가능한 코드를 선호.
        "프리미엄 최적화는 모든 악의 근원이다."
    최적화는 반드시 필요할 때만:
        너무 간단해서 문제가 될 경우, 나중에 복잡성을 추가하는 건 어렵지 않음.
        그 순간이 오지 않을 수도 있음.
    복잡한 코드 작성을 지양:
        반드시 필요한 시점까지 기다릴 것.
        단순한 코드를 작성한 것에 대해 후회할 가능성은 매우 낮음.
    고성능 코드나 기능은 특정한 환경에서만 작동할 수 있음.
        예:
            LMDB: PowerDNS에서 안정적으로 사용하기까지 많은 어려움 겪음.
            RapidJSON: SIMD 가속 JSON 라이브러리. 성능은 뛰어나지만 사용 조건이 까다로움.
    "나는 이 제약을 극복할 수 있다"는 자신감이 있더라도:
        올해는 가능하더라도 5년 후 자신 혹은 후임 개발자는 어려움을 겪을 수 있음.
        복잡한 프로그래밍 언어도 동일한 원칙이 적용됨.
    결론:
        코드를 단순화하라:
            정말 간단하게. 그보다 더 간단하게.
        최적화는 나중으로 미뤄라:
            복잡성은 필요할 때 추가 가능하지만, 초기에 복잡하게 만들면 유지보수가 어려워짐.

## 25.01.23

**DR (Disaster Recovery) / 네이버 데이터센터 각(GAK)**

[“카카오와는 다르다”··· 네이버클라우드, ‘재해에도 무너지지 않는 기술’ 선봬 - 디지털데일리](https://ddaily.co.kr/page/view/2022121416313195562)

    15일 SK C&C 판교 데이터 센터 화재로 카카오 서비스 장애가 일부 지속되고 있는 가운데, 동일한 데이터센터를 사용함에도 네이버와 카카오의 서비스 복구 대응이 다른 이유에 이목이 쏠린다.

    네이버는 주요 서비스의 이원화를 꾸준히 대비해 왔기 때문에 한곳의 데이터센터 장애에도 서비스 정상화가 빠르게 이뤄질 수 있었다는 설명이다. 카카오는 여러 데이터 센터에 데이터를 분할 백업하고 있고 이원화 시스템을 갖췄지만, 이를 적용하는 데 시간이 오래 걸린다는 설명이다.

    이번 화재로 네이버는 뉴스 서비스 댓글 팔로우, 스마트스토어, 쇼핑라이브 등 일부 기능이 원활하지 못했지만 카카오톡처럼 본 서비스 자체가 장시간 먹통이 되지 않았다. 뉴스 팔로우 기능은 아직 점검 중이나, 쇼핑라이브는 장애 발생 세 시간 만에 복구됐고, 스마트스토어도 지난 밤사이 복구가 완료됐다.

    카카오톡의 경우 16일 오전 텍스트 메시지 송수신, PC 버전 로그인 기능 등을 복구했으나, 오후 1시 기준 이미지, 동영상 메시지 송수신은 현재까지도 작동하지 않고 있다. 카카오톡 최장 시간 장애에 이용자들은 전국구 서비스인 카카오톡이 재난 대응에 미흡했다며 목소리를 높이고 있다.

- [네이버 ‘각 세종’, LEED 플래티넘 획득… “지속가능 IDC 운영 인정” - 더나은미래](https://www.futurechosun.com/archives/89862)

    이번 각 세종의 LEED 플래티넘 인증까지 더해지며, 네이버는 모든 건축물에 대해 LEED 플래티넘을 획득하게 됐다. 2013년 각 춘천의 LEED 플래티넘 획득을 시작으로 그린팩토리(2014년), 커넥트원(2015년)에 이어 제2사옥 1784(2022년), 이번 각 세종까지 모두 ‘친환경’ 인증을 받게 된 셈이다.

## 25.01.26

[Performance Improvements in .NET 9 - .NET Blog](https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-9/#gc)

- Object Stack Allocation
- https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-9/#object-stack-allocation

> For years, .NET has explored the possibility of stack-allocating managed objects.

제한적인 상황에서 .NET 9 은 참조타입의 스택할당을 지원한다.

```cs
// dotnet run -c Release -f net8.0 --filter "*" --runtimes net8.0 net9.0

using BenchmarkDotNet.Attributes;
using BenchmarkDotNet.Running;

BenchmarkSwitcher.FromAssembly(typeof(Tests).Assembly).Run(args);

[MemoryDiagnoser(false)]
[DisassemblyDiagnoser]
[HideColumns("Job", "Error", "StdDev", "Median", "RatioSD")]
public class Tests
{
    [Benchmark]
    public int GetValue() => new MyObj(42).Value;

    private class MyObj
    {
        public MyObj(int value) => Value = value;
        public int Value { get; }
    }
}
```
위의 코드가 어떻게 번역되느냐 하면

```
; Tests.GetValue()
       push      rax
       mov       rdi,offset MT_Tests+MyObj
       call      CORINFO_HELP_NEWSFAST
       mov       dword ptr [rax+8],2A
       mov       eax,[rax+8]
       add       rsp,8
       ret
; Total bytes of code 31
```
^ .NET 8

```
; Tests.GetValue()
       mov       eax,2A
       ret
; Total bytes of code 6
```

^ .NET 9

결론적으로 생성자를 호출하지 않게 되면서 .NET 9 기준 위 코드에는 가비지가 발생하지 않는다.

---

- GC
- https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-9/#gc

Applications end up having different needs when it comes to memory management. Would you be willing to throw more memory at maximizing throughput, or do you care more about minimizing working set?

애플리케이션은 메모리 관리와 관련하여 서로 다른 요구 사항을 갖게 됩니다. 처리량 극대화에 더 많은 메모리를 투입할 의향이 있습니까, 아니면 워킹셋 최소화에 더 신경을 쓰시나요?

Workstation GC optimizes for reduced memory consumption, while server GC optimizes for maximum throughput. Historically, workstation employs a single heap, whereas server employs a heap per core. That typically represents a tradeoff between amount of memory consumed and the overhead of accessing a heap, such as the cost of allocating. If a bunch of threads are all trying to allocate at the same time, with server GC they’re very likely to all be accessing different heaps, thereby reducing contention, whereas with workstation GC, they’re all going to be fighting for access. Conversely, more heaps generally means more memory consumed (even though each heap could be smaller than the single one), especially in lull periods where the system might not be fully loaded, yet is paying in working set for those extra heaps.

- workstation GC : 하나의 힙이 존재함. 만약 cpu core 가 힙에 접근할 때는 경합이 발생할 수 있다. 성능손실 가능성이 있음
- server GC : cpu core 마다 힙이 존재함. 그러니 각 코어는 힙에 접근할 때 거의 경합을 겪지 않을 것임. 대신에 메모리 오버헤드가 있음.

- [Dynamically Adapting To Application Sizes | by Maoni0 | Medium](https://maoni0.medium.com/dynamically-adapting-to-application-sizes-2d72fcb6f1ea)
- 만약 중간 타협점을 원한다면 DATAS (Dynamically Adapting To Application Sizes) 방법이 있음.

---

Chat GPT 한테 질문.

### .NET Workstation GC vs Server GC 비교

### 🔹 1. Workstation GC  
📌 **싱글스레드 환경**(또는 가벼운 멀티스레드 환경)에 최적화됨.  
📌 **UI 기반 애플리케이션(WPF, WinForms)**에서 사용됨.  

#### **특징**  
- 기본적으로 **싱글 GC 스레드**만 사용  
- UI 애플리케이션에서 **응답성을 유지**하는 것이 목표  
- GC 실행 시 **애플리케이션이 멈추는 시간을 최소화**  
- 멀티코어 시스템에서도 기본적으로 **하나의 GC 스레드**만 사용  

#### **장점**  
✅ UI 애플리케이션에서 멈추는 시간이 짧음 → 부드러운 UX  
✅ 낮은 메모리 사용량  

#### **단점**  
❌ 멀티코어 서버 환경에서는 성능이 떨어질 수 있음  
❌ GC 성능이 낮아 대량 객체 할당/해제 시 비효율적  

---

### 🔹 2. Server GC  
📌 **멀티스레드 환경**(특히 서버 애플리케이션)에 최적화됨.  
📌 **ASP.NET, .NET Core Web API, 백엔드 서버 프로세스**에서 사용됨.  

#### **특징**  
- **각 논리적 프로세서(코어)마다 하나의 GC 스레드**를 생성  
- GC 실행 시 **모든 코어를 활용하여 병렬로 동작**  
- **더 많은 메모리 힙**을 지원  
- **스레드 풀을 적극 활용**하여 대량 요청을 빠르게 처리  

#### **장점**  
✅ GC가 여러 코어를 활용하여 빠르게 실행됨 → **GC 속도가 빠름**  
✅ **멀티스레드 환경에서 뛰어난 성능**  
✅ **큰 메모리 힙을 효율적으로 관리**  

#### **단점**  
❌ 멀티스레드를 활용하기 때문에 **메모리 사용량 증가**  
❌ GC 실행 시 **CPU 사용량이 순간적으로 높아질 수 있음**  

---

### 🔹 성능 비교  

|                   | **Workstation GC** | **Server GC**           |
| ---               | ------------------ | ------------------      |
| **적용 대상**     | 데스크톱 앱, UI 앱 | 서버 앱, 백엔드 API     |
| **멀티코어 지원** | 제한적             | 코어마다 GC 스레드 할당 |
| **GC 속도**       | 느림               | 빠름                    |
| **CPU 활용도**    | 낮음               | 높음                    |
| **메모리 사용량** | 적음               | 많음                    |
| **응답성**        | UI 지연 최소화     | 서버 처리량 증가        |

## 25.01.29

[(211) 유튜버 모두가 속은 Honey 사기사건](https://www.youtube.com/watch?v=EsqBuwOuXB0)

- 허니 제휴 사기 사건
- [간단하게 알아보는 허니 사기 사건 - 미스터리/공포 - 에펨코리아](https://www.fmkorea.com/7899142524)
- [(219) Exposing the Honey Influencer Scam](https://www.youtube.com/watch?v=vc4yL3YTwWk)
- [uBO Quick Filters list being stolen by team behind Honey browser extension (Pie Adblock extension) : uBlockOrigin](https://old.reddit.com/r/uBlockOrigin/comments/1hr6xjc/ubo_quick_filters_list_being_stolen_by_team/)

- MegaLag에 따르면, Honey는 인플루언서의 제휴 링크를 클릭하면, 결제 시 Honey의 팝업과 상호작용할 때 자체 추적 링크로 교체하여 제휴 수익을 가로챔.
- 이로 인해 Honey가 판매에 대한 크레딧을 받게 되며, 이는 유튜버나 웹사이트가 아닌 Honey가 이익을 얻는 결과를 초래함.
- 애드온이 제휴 링크를 교체하여 수익을 훔치는 것으로 밝혀졌으며, 코드도 훔친다는 의혹이 있음.
