# 웹 개발자를 위한 대규모 서비스를 지탱하는 기술

![](WebMassiveService_Image/2022-05-24-11-26-00.png)

**하테나 소개**

하테나(hatena)는 '지식 커뮤니티' 인력검색 서비스와 다이어리(블로그) 호스팅 
서비스, 소셜 북마크 서비스 등을 개발해 운영하고 있는 일본의 인터넷 기업으로, 
인터넷 서비스의 가장 매력적인 두 가지 요소인 'Fun'과 'Creativity'를 함께 
추구하는 서비스, 생활 파트너로서 존재하는 서비스를 제공하고 있다.

## 1. 대규모 웹 서비스 개발 오리엔테이션

전체 그림 파악하기

### 대규모 서비스와 소규모 서비스

**하테나의 서비스 규모**

2009년 8월 기준 

- 등록 사용자는 100만 명 이상, 1500만 UU(Unique User)/월
- 수십 억 액세스/월(이미지 등으로의 액세스 제외)
- 피크(peak) 시 회선 트래픽 양은 430Mbps
- 하드웨어(서버)는 500대 이상

100만 명 이상의 사용자들이 블로그를 쓰거나 북마크를 등록하고 있고, 우러간 1,500만 명 이상이 방문하고 있다. 이 방문자 수에 의해 월간 수십 억 액세스가 발생한다. 이 정도가 되면 일일 액세스 로그는 기본적으로 기가바이트(gigabyte) 크기가 되며, DB 서버가 저장하는 데이터 규모도 대략 기가바이트 수준, 많을 때는 테라바이트(terabyte) 정도가 된다.

**소규모 서비스와 대규모 서비스의 차이**

- 확장성 확보, 부하분산 필요 : 서버 1대로 처리할 수 없는 대량의 액세스
- 다중성 확보 : 시스템은 다중성을 지닌 구성, 즉 특정 서버가 고장 나거나 성능이 저하되더라도 서비스를 계속할 수 있는 구성으로 할 필요가 있다.
- 효율적 운용 필요 : 서버 대수가 100대를 넘어섰을 때, 각 서버의 역할과 상태를 어떻게 관리할 것인가
- 개발자 수, 개발방법의 변화

**대규모 데이터량에 대한 대처**

### 계속 성장하는 서비스와 대규모화의 벽

**웹 서비스의 어려움**

**하테나가 성장하기 까지**

### 서비스 개발의 현장

**하테나의 기술팀 체제**

**하테나에서의 커뮤니케이션 방법**

- 책에서 말하는 시기에 하테나는 임직원 40명 정도의 작은 기업

**실제 서비스 개발**

![](WebMassiveService_Image/2022-05-30-15-48-30.png)

**개발에 사용하는 툴**

- 프로그래밍 언어 : Perl, C/C++, JavaScript 등
  - 서버-사이드(Server-side)인 웹 애플리케이션은 창업 때부터 Perl로 개발하고 있기 때문에, Perl을 사용한다. 검색 엔진 등 메모리 욕너이 엄격하거나 속도가 요구되는 곳에는 일부 C/C++등도 사용한다. 웹 애플리케이션의 사용자 인터페이스 개발은 별다른 선택의 여지없이 JavaScript를 사용한다.
  - 프로그래밍 언어 선택 정책4은 '동일 레이어인 언어는 하나로 한정한다.'는 것이다. 예를 들면 근래의 웹 애플리케이션 개발에는 PHP, Python, Ruby 등의 스크립트 언어가 자주 사용된다. 개발자에 따라서는 이러한 언어가 기호에 맞는 사람도 있겠지만 기본은 Perl을 사용하도록 부탁하고 있다. 이는 앞서 언급한 표준화의 관점에서 중요하다. 같은 언어를 사용하면 자사 내에서 노하우가 널리 통용되고 팀 간 이동도 원활하다. 다른 사람이 만든 시스템의 유지보수도 용이하다.
- 주요 미들웨어 : 마찬가지로 표준화 관점에서 이용할 미들웨어와 프레임워크도 모든 팀에서 통일, 주요 미들웨어는 Linux, Apache, MySQL, memcached 처럼 웹 개발의 기본에 해당되는 것들이다.
- 웹 애플리케이션 프레임워크 : 자체 개발한 Ridge, 심플하고 직관적으로 사용할 수 있는 MVC 프레임워크다.
- 주위 머신의 OS 및 에디터 : 기본적으로는 자유. 프레임워크나 미들웨어와 달리 그 외의 영역에서는 자유다.
- 버전관리는 git, BTS(Bug Tracking System)는 독자 개발한 '아사카'

## 2. 대규모 데이터 처리 입문

메모리와 디스크, 웹 애플리케이션과 부하

## 3. OS 캐시와 분산

대규모 데이터를 효율적으로 처리하는 원리

## 4. 분산을 고려한 MySQL 운용

## 5. 대규모 데이터 처리 실전 입문

애플리케이션 개발의 급소

## 6. [과제] 압축 프로그래밍

데이터 크기, I/O 고속화와의 관계 인식하기

## 7. 알고리즘 실용화

가까운 예로 보는 이론/연구의 실전 투입

## 8. [과제] 하테나 키워드 링크 구현

응용으로 가는 길 깨닫기

## 9. 전문 검색기술 도전

대규모 데이터 처리의 노하우

## 10. [과제] 전문 검색엔진 작성

기초, 상세부분 작성, 속도와 정확성 추구

## 11. 대규모 데이터 처리를 지탱하는 서버/ 인프라 입문

웹 서비스의 백엔드

## 12. 확장성 확보에 필요한 사고방식

규모 중대와 시스템 확장

## 13. 다중성 확보, 시스템 안정화

100%에 근접한 가동률을 실현하는 원리

## 14. 효율향상전략

하드웨어의 리소스 사용률 높이기

## 15. 웹 서비스와 네트워크

서비스의 성장

## Appendix A. 현대 웹 서비스 구축에 필요한 실전 기술

대규모 서비스에 대응하기 위해서